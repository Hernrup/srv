{
  consul: "localhost:8500",
  logging: {
    level: "INFO",
    format: "default",
    output: "stdout"
  },
  jobs: [
    {
      name: "logstash",
      exec: ["logstash"],
      restarts: "unlimited",
      tags: [{{ range $TAG := env "TAGS" | split ";" }}"{{ $TAG }}", {{ end }}],
    },
    {
      name: "consul-agent",
      exec: "/usr/local/bin/consul_agent.sh",
      restarts: "unlimited",
      stopTimeout: "5s",
    },
    {
      name: "consul-leave",
      exec: "consul leave",
      when: {
        source: "consul-agent",
        once: "stopping"
      }
    },
    {
      name: "telegraf-consul-template",
      exec: ["consul-template", "-config", "/etc/consul_template/telegraf.json"],
      restarts: "unlimited"
    },
  ],
  telemetry: {
    port: 9090,
    interfaces: ["static:127.0.0.1"]
  }
}

